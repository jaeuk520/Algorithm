#include <string>
#include <vector>
#include <stack>
using namespace std;

int solution(vector<int> ingredient) {
    int answer = 0;
    
    stack<int> s;
    stack<int> temp;
    int recipe[4] = {1,3,2,1};
    
    for(int i=0; i<ingredient.size(); i++) {
        
        s.push(ingredient[i]);
        
        if(s.top() == 1 && s.size() >= 4) {
            for(int i=0; i<4; i++) {
                if(recipe[i] == s.top()) {
                    int num = s.top();
                    s.pop();
                    temp.push(num);   
                } else {
                    while(!temp.empty()) {
                        int t = temp.top();
                        temp.pop();
                        s.push(t);
                    }
                    break;
                }
            }
            if(!temp.empty()) {
                while(!temp.empty()) {
                    temp.pop();
                }
                answer++;
            }
        }
    }
    
    return answer;
}